---
layout: post
title: OOSE AE2
date: 2020-02-17
excerpt: "è½¯å·¥è¯¾é¢˜ä½œä¸š - é™æ€åˆ†æ"
tags: [è¯¾é¢˜, code, è½¯ä»¶å·¥ç¨‹, 2020, oose]
feature: https://previews.123rf.com/images/karpenkoilia/karpenkoilia1709/karpenkoilia170900117/86423976-modern-line-web-concept-for-programming-linear-web-banner-for-coding-.jpg
comments: true
---

## ç›®å½•

* ç›®å½•
{:toc}

---

ğŸ¬**Soundness å¥å…¨æ€§/å®Œæ•´æ€§:**
- tool that raises the alarm for every program is trivially sound
- accepts every program by emmitting no alarms is trivially complete
- **These tools report all defects checked for & produces no false negatives. These are relatively slower. but, produces a large amount of false positives.**
- sound bug detection system: <font color= "red">**é’ˆå¯¹æ¯ä¸ªbugéƒ½å¼•å‘è­¦å‘Š**ã€‚å¹¶ä¸”soundç³»ç»Ÿå¯èƒ½ä¼šé’ˆå¯¹æ­£ç¡®ç¨‹åº,æŠ¥å‘Šå‡ºæ½œåœ¨é”™è¯¯ã€å‡æ­£è¾“å‡º,ä¸ä¸€å®šä¸ºéœ€è¦ä¿®å¤çš„çœŸå®ç¼ºé™·ã€‘</font>ã€‚
- unsound system: å¯èƒ½äº§ç”Ÿ**å¤§é‡**false negative outputã€å‡è´Ÿè¾“å‡ºã€‘,<font color= "red">unsoundç³»ç»Ÿäº§ç”Ÿ**å°‘é‡å‡æ­£è¾“å‡º**,æ‰€ä»¥ä¼š**å¿½ç•¥æŸäº›æ½œåœ¨ç¼ºé™·**</font>
- è€ŒæŸäº›æƒ…å†µä¸‹ï¼Œ<font color= "red">unsoundç³»ç»Ÿä¸ºcompleteçš„ï¼Œç»ä¸ä¼šäº§ç”Ÿå‡æ­£è¾“å‡º, æ­¤æ—¶ï¼Œè¯¥ç³»ç»Ÿæœ‰è¶³å¤Ÿç²¾ç¡®åº¦ï¼Œæ¯ä¸ªè¢«æŠ¥å‘Šçš„ç¼ºé™·éƒ½ä¸ºéœ€è¦ä¿®å¤çš„çœŸå®ç¼ºé™·</font>

![](/static/2020-02-20-16-41-45.png)

ğŸ¬**Precision ç²¾ç¡®æ€§:**
- **å½“æ£€æµ‹ç³»ç»Ÿä¸­æ¯ä¸ªå¼•å‘è­¦å‘Šå¤„éƒ½ç¡®å®ä¸ºbug(å¯åˆ†è¾¨çš„ç¼ºé™·æ¨¡å¼)**ï¼Œè¯¥ç³»ç»Ÿä¸ºç²¾ç¡®çš„ã€‚ä¸€ä¸ªä¸ç²¾ç¡®çš„ç³»ç»Ÿå¯èƒ½å¼•å‘false positive outputã€å‡æ­£ã€‘
- ä¸€èˆ¬ç”¨äºè¡¡é‡åˆ†æå·¥å…·**é¿å…å‡æ­£è¾“å‡ºçš„èƒ½åŠ›**,é’ˆå¯¹æŠ¥å‘Šç¼ºé™·æ˜¯å¦è¶³å¤Ÿç²¾ç¡®
- a complete tool(sometimes unsound is complete) is one that is absolutely precise

é€šå¸¸,å¤§éƒ¨åˆ†ç¨‹åºçš„åˆ†æéƒ½ä¸ºä¿å®ˆå‹(sound&imprecise),ä½†æœ€å¥½æƒè¡¡soundness, precision, execution timeï¼Œä½¿åˆ†ææ›´å…·çµæ´»æ€§ä»¥ä¼°è®¡ç¨‹åºè¡Œä¸º.

Unsoundåˆ†æå·¥å…·ä¸€èˆ¬ç”¨äºå¤§å‹codeåˆ†æä¸­, ç‰ºç‰²äº†æ‰¾åˆ°bugçš„æœ€å¤§æ•°é‡,æœ€å°åŒ–å‡æ­£è¾“å‡ºï¼Œèƒ½å¤Ÿæ›´å¿«æ‰¾å‡ºbug.ã€æœ‰æ—¶å€™å®Œå…¨ä¸ä¼šäº§ç”Ÿå‡æ­£è¾“å‡ºï¼Œæ­¤æ—¶è¶³å¤Ÿç²¾ç¡®(æ¯ä¸ªbugéƒ½éœ€è¦ä¿®å¤),ç§°è¿™ä¸ªç³»ç»Ÿä¸ºcompleteã€‘

soundåˆ†æå·¥å…·ä¿è¯äº†å°½å¯èƒ½æ‰¾å‡ºæ‰€æœ‰å¯è¯†åˆ«ç¼ºé™·,æ‰€ä»¥é€Ÿåº¦ç›¸å¯¹è¾ƒæ…¢ã€‚

---

ğŸ¬**ç¼ºé™·æ¨¡å¼:**
![](/static/2020-02-20-13-54-28.png)

ğŸ¬**ç¼ºé™·æ¨¡å¼ä¸åæ¨¡å¼ç›¸å…³ï¼š**
- åæ¨¡å¼æ˜¯æŒ‡è¢«å¤šæ¬¡è¯æ˜å¤±è´¥çš„**é€šç”¨è½¯ä»¶è®¾è®¡æ¨¡å¼**, **è¿™äº›è´Ÿé¢èŒƒä¾‹å¯¹æ­£é¢è®¾è®¡æ¨¡å¼æ˜¯å¾ˆé‡è¦çš„è¡¥å……**ã€‚ç¼ºé™·æ¨¡å¼æ˜¯ä¸è®¾è®¡æ— å…³ï¼Œä¸ç¼–å†™ä»£ç å’Œè°ƒè¯•è¿‡ç¨‹æœ‰å…³


æ³¨æ„ï¼Œæœ¬è¯¾é¢˜ä»…ç ”ç©¶è°ƒè¯•å™¨å†…å¸¸è§çš„ç¼ºé™·æ¨¡å¼ï¼Œæ— æ‰©å±•ã€‚è¯¦æƒ…å‚è€ƒ<a href="http://findbugs.sourceforge.net/bugDescriptions.**html**">**å®˜æ–¹æ–‡æ¡£**</a>æˆ–**ç¼ºé™·æŠ¥å‘Š**

ğŸ¬**ç¼ºé™·ç±»å‹åˆ†ç±»**
- **correctness of program**(æœ€å¸¸è§): ä»£ç æ­£ç¡®æ€§, å¦‚ç©ºæŒ‡é’ˆå¼‚å¸¸çš„å¼•å‘ï¼Œæ— é™é€’å½’ï¼Œloop, è¯»ä¸å†™è¿›
- **bad practice**: ç¼–ç¨‹åä¹ æƒ¯ï¼Œå¦‚å°è¯•å…³é—­æµå¤±è´¥ï¼Œå¿˜è®°å¼‚å¸¸å¤„ç†
- **performance**:æ€§èƒ½ç›¸å…³,æ— ç”¨å­—æ®µ
- **multithreaded correctness**: å¤šçº¿ç¨‹å®‰å…¨é—®é¢˜, çº¿ç¨‹å®ˆæŠ¤,å®‰å…¨ç›¸å…³
- **Dodgy code**: ç³Ÿç³•ä»£ç , æœªä½¿ç”¨çš„å±€éƒ¨å˜é‡æˆ–å¼ºåˆ¶è½¬æ¢å¯¼è‡´é¢„æœŸå¤–ç²¾åº¦ç¼ºå¤±(unchecked cast)
- **international problems**:å›½é™…åŒ–é—®é¢˜
- **Security**
- **Malicious code vulnerability** æ¶æ„ä»£ç 

---

## ç›®æ ‡ objective

- å­¦ä¹ å¦‚ä½•ä½¿ç”¨debuggeråˆ†æç®€å•è½¯ä»¶æ¶æ„. é’ˆå¯¹è°ƒè¯•è¾“å‡ºä¿¡æ¯å¯¹æºç åˆ†æå…¶**soundnesså¯é æ€§/å¥å…¨æ€§ & precision**.

- åˆ†è¾¨å¯¹æ¯”é™æ€è‡ªåŠ¨åˆ†æï¼Œä½•æ—¶è¿›è¡Œmanual inspectionæ›´ä¸ºåˆé€‚/ä¸åˆé€‚

## é…ç½® set-up

1. ä¸‹è½½ <a href="https://spotbugs.readthedocs.io/en/latest/">``SpotBugs debugger binary files ``</a>ï¼Œã€æœ€åè¿˜æ˜¯ç”¨äº†mavenæ’ä»¶é…ç½®ã€‚ã€‚æºæ–‡ä»¶æ„£æ˜¯æ²¡çœ‹è§å“ªç»™äº†jarã€‚ã€‚
   1. Successful installation and running of SpotBugs would generate
a graphical user interface identical to Figure 1.![](/static/2020-02-19-15-53-51.png)

2. ä¸‹è½½ ``w2custmoreader.zip``æ–‡ä»¶ã€‚è¯¥æ–‡ä»¶åŒ…å«2ä¸ªç¨‹åºæºä»£ç , 
   1. ``Util.java``,åŒ…å«customCharReader()ä»æ–‡ä»¶ä¸­ä¸€æ¬¡æ€§è¯»nä¸ªå­—ç¬¦,å°†æ¯ä¸ªå¶æ•°ä½å­—ç¬¦ä¸blankäº¤æ¢,è¾“å‡º. 
   2. ``Driver.java``è¯»å–è¾“å…¥æ–‡ä»¶,è°ƒç”¨customCharReaderæ–¹æ³•, é»˜è®¤n=7
   - åˆ›å»ºjavaé¡¹ç›®, ``oosew2``é¡¹ç›®å, åœ¨``src``æ–‡ä»¶å¤¹ä¸‹åˆ›å»º``oose.w2``åŒ…, å°†å‹ç¼©åŒ…å†…æºç æ”¾å…¥è¯¥åŒ…

3. ä½¿ç”¨ spotbugs GUIåˆ†æè¯¥é¡¹ç›®.è¿™é‡Œé€šè¿‡`` mvn spotbugs:gui``æŒ‡ä»¤è°ƒå‡º
   1. ![](/static/2020-02-19-22-43-40.png)

ğŸ¬å…¶ä»–spotbugsç›¸å…³MVNæŒ‡ä»¤

- è¿™é‡Œç°ç‚’ç°å–maven, Maven buildä¸­goalsåªéœ€è¦åŒ…æ‹¬mvnä¹‹åå‚æ•°,å®³

``mvn spotbugs:check``å’Œ``mvn spotbugs:spotbugs``å¯ç”¨äºé¡¹ç›®åˆ†æ

---

é’ˆå¯¹å­¦æ ¡ç»™çš„æ–‡ä»¶çš„é™æ€åˆ†æç»“æœ
![](/static/2020-02-19-23-15-53.png)

å¾ˆéº»çƒ¦ç›´æ¥åœ¨è¿™é‡Œæ”¾æºç äº†:

- Util.java

```java
package oose.w2;

import java.io.BufferedReader;
import java.io.File;
import java.io.FileReader;

/**
 * 
 * @author <firstName> <lastName> , <RegistrationNo>
 *
 */
public class Util {
	/**
	 * A custom reader that reads first n characters from a file and swaps
	 * every even char with a blank then prints the output. For a file with
	 * less than n chars, customCharReader does not care about how many 
	 * characters were actually read by the BufferedReader.
	 * @param file
	 * @param n
	 */
	public void customCharReader(File file, int n) {
		int start;
		char[] buffer = new char[n];

		try {
			BufferedReader reader = new BufferedReader(new FileReader(file));
			reader.read(buffer,0,n);
			reader.close();
		}
		catch(Exception e) {
			System.out.println("Something went wrong");
		}
		for(int i=1;i<=buffer.length;i++) {
			int swap = i % 2;
			if (Integer.toString(swap) == Integer.toString(1)) { 
				buffer[i] = ' ';
			}			
		}
		System.out.print(buffer);
	}
	
	/**
	 * This function swaps an old character with a new one in a text string
	 * @param text
	 * @param oldchar
	 * @param newchar
	 * @return String
	 */
	public static String charReplace(String text, char oldchar, char newchar) {
		text.replace(oldchar, newchar);
		return text;
	}
}
```

- Driver.java

```java
package oose.w2;

import java.io.File;

import javax.swing.JFileChooser;

public class Driver {
	public static void main(String []args) {
		JFileChooser chooser = new JFileChooser();
	    chooser.setCurrentDirectory(new java.io.File("."));
	    chooser.setDialogTitle("SelectFile");
	    chooser.setFileSelectionMode(JFileChooser.FILES_ONLY);
	    chooser.setAcceptAllFileFilterUsed(false);

	    if (chooser.showOpenDialog(null) == JFileChooser.APPROVE_OPTION) {
	    		File selectedFile = chooser.getSelectedFile();
	    		new oose.w2.Util().customCharReader(selectedFile, 7);
	    } 
	    else {
	      System.out.println("No Selection ");
	    }
	}
}

```

---

## Task

- åˆ—ä¸¾ ``Util.java`` æ–‡ä»¶ä¸­åˆ†æå‡ºçš„bugs
<br />
- æ ¹æ®ä¸Šé¢çš„bug report, æå‡ºè§‚ç‚¹æ”¯æ’‘è¯¥bugæ£€æµ‹ç³»ç»Ÿæ˜¯å¦sound(ä¸è¶…è¿‡100 words). æ ¹æ®æ¯è¡Œæºç æ”¯æ’‘æå‡ºçš„è§‚ç‚¹.
  - å¦‚æœæ–­å®šè¯¥system sound, ä¸éœ€è¦æå‡ºä»»ä½•åä¾‹
  - å¦‚æœæ–­å®šè¯¥system unsound, **è¯·åˆ—ä¸¾3ä¸ªåä¾‹**
<br>
- æ ¹æ®bugåˆ†ææŠ¥å‘Š, æå‡ºè§‚ç‚¹æ”¯æ’‘è¯¥bugæ£€æµ‹ç³»ç»Ÿæ˜¯å¦precise(ä¸è¶…è¿‡100 words). æ ¹æ®æ¯è¡Œæºç æ”¯æ’‘æå‡ºçš„è§‚ç‚¹.
  - å¦‚æ–­å®šè¯¥ç³»ç»Ÿprecise,ä¸éœ€è¦æä¾›åä¾‹
  - å¦‚æ–­å®šimprecise,**åˆ—ä¸¾1ä¸ªåä¾‹**
<br />
- é‡æ„ä¿®å¤``Util.java``æ–‡ä»¶. é‡æ„å¿½ç•¥éç²¾ç¡®ç›¸å…³çš„é”™è¯¯bug(å³,å¦‚æ–­è¨€è¯¥ç³»ç»Ÿä¸ºç²¾ç¡®çš„è¯·ä¿®å¤æ¯ä¸€ä¸ªè°ƒè¯•å™¨å‘ç°çš„æ½œåœ¨ç¼ºé™·)ï¼Œå¦‚æ–­è¨€è¯¥ç³»ç»Ÿä¸ºéå¥å…¨çš„è¯·å°†è°ƒè¯•å™¨å¿½ç•¥çš„æ½œåœ¨ç¼ºé™·è¿›è¡Œä¿®å¤ã€‚

## æäº¤

- æºç æäº¤ä¸º``<registration num>.zip``æ–‡ä»¶,åŒ…æ‹¬ä»¥ä¸‹æ–‡ä»¶
   - ``BugsReport_<registration num>.pdf`` : åŒ…æ‹¬ TASKçš„solution, é¡µçœ‰æ³¨æ˜name,guid
   - é‡æ„åçš„``Util.java``æ–‡ä»¶, æ³¨é‡Šname, 
   
### Task 4

å°½é‡é‡æ„äº†ä¸‹``Util.java``æ–‡ä»¶

```java
package oose.w2;

import java.io.BufferedReader;
import java.io.File;
import java.io.FileInputStream;
import java.io.IOException;
import java.io.InputStreamReader;
import java.util.Arrays;

/**
 * 
 * @author 
 *
 */
public class Util {
	/**
	 * A custom reader that reads first n characters from a file and swaps 
	 * every even char with a blank then prints the output. For a file with
	 * less than n chars, customCharReader does not care about how many 
	 * characters were actually read by the BufferedReader.
	 * @param file
	 * @param n
	 */
	public void customCharReader(File file, int n) {
		char[] buffer = new char[n];
		BufferedReader reader = null;
		try {
			reader = new BufferedReader(new InputStreamReader(new FileInputStream(file), "UTF-8"));
			int i = 0;
			int count =reader.read();
			while (count!=-1) {
				// when count == -1, the reading of file is finished
				char content = (char) count;
				// checking whether current character is empty
				if (content!= ' ' &&content!='\t'&&content!='\r' && content!='\n') {
					//if current char is not empty and must be int
					if (i<n) {
						// when index is small than n, copy the content to buffer
						buffer[i++] = content; 
					}else {
						// when the buffer is full, file content is greater than buffer
						break;
					}
				}
				count = reader.read();
			}
			reader.close();
			// count the number of elements in the array
			int sum=0;
			for (char each:buffer) {
				if (each!='\0') {
					sum++;
				}
			}
			// updating the buffer,when the buffer is not full
			if (sum!=0) {
				buffer =  Arrays.copyOfRange(buffer,0,sum);
			}else {
				//sum=0 means the file could be empty or no int found in the content
				throw new IOException("File is empty or the content is invalid");
			}
		}catch(RuntimeException e) {
			throw e;
		}catch (IOException e) {
			e.printStackTrace();
		}catch(Exception e) {
			System.out.println("Something went wrong");
		}finally {
			try {
				if (reader!=null) {
					reader.close();
				}
			} catch (IOException e) {
				e.printStackTrace();
			}
		}
		
		for(int i=1;i<buffer.length;i++) {
			int swap = i % 2;
			if ((Integer.toString(swap)).equals(Integer.toString(1))) { 
				buffer[i] = ' ';
			}			
		}
		System.out.println(buffer);
	}
	
	/**
	 * This function swaps an old character with a new one in a text string
	 * @param text
	 * @param oldchar
	 * @param newchar
	 * @return String
	 */
	public static String charReplace(String text, char oldchar, char newchar) {
		String textUpdated = null;
		try {
			if (text.indexOf(oldchar)>0) {
				textUpdated = text.replace(oldchar, newchar);		
			}else if(text.indexOf(oldchar)<0) {
				textUpdated = text;
				System.out.println("Invalid content, cannot find the oldchar in the text");
			}
		}catch (NullPointerException e) {
			System.out.println("the text is null");
			e.printStackTrace();
		}catch (Exception e) {
			e.printStackTrace();
		}
		return textUpdated;
	}

}
```

---
è‹±è¯­å¥½çƒ‚ã€‚ã€‚ä¸æ¸…æ¥šåœ¨å†™ä»€ä¹ˆï¼Œæ‡’æƒ°ï¼Œç›´æ¥æ”¾æˆªå›¾

### æ™®æ™®é€šé€šReport - Task 1

![](/static/2020-02-21-04-52-12.png)
![](/static/2020-02-21-04-52-30.png)
![](/static/2020-02-21-04-52-59.png)
![](/static/2020-02-21-04-53-34.png)
![](/static/2020-02-21-04-53-58.png)
![](/static/2020-02-21-04-54-17.png)

### Report - Task 2

é’ˆå¯¹soundness, è¿™é‡Œè®¤ä¸ºè¯¥ç³»ç»Ÿå¹¶ä¸å¥å…¨ï¼Œæ²¡æœ‰å‘ç°æŸäº›æ½œåœ¨ç¼ºé™·, äº§ç”Ÿå‡è´Ÿè¾“å‡ºã€‚åªå‘ç°äº†æŸäº›å¯è¯†åˆ«ç¼ºé™·æ¨¡å¼ã€‚

![](/static/2020-02-21-04-56-11.png)

### Report - Task 3

é’ˆå¯¹Precision, è¿™é‡Œè®¤ä¸ºè¯¥ç³»ç»Ÿä¸ºç²¾ç¡®çš„ï¼Œæ‰€æœ‰è°ƒè¯•å™¨å‘ç°çš„ç¼ºé™·éƒ½ç¡®å®éœ€è¦è¢«ä¿®å¤ã€‚é€šå¸¸è®¤ä¸ºä¸€ä¸ªä¸å¥å…¨çš„ç³»ç»Ÿä¸ºç²¾ç¡®çš„ï¼Œå› ä¸ºé¿å…å‡æ­£è¾“å‡ºæŸå¤±äº†ç²¾ç¡®æ€§ã€‚

![](/static/2020-02-21-04-57-27.png)

---

å¾ˆç®€å•ä½†æ˜¯åˆå†™äº†å¥½ä¹…ï¼Œæœ‰è¢«å¼±æ™ºåˆ°ã€‚

<center>21-02-2020 finished</center>