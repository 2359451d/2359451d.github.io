---
layout: post
title: "Cousera笔记 - 计算机组成1 · 计算机基本结构"
date: 2020-06-10
excerpt: "冯·诺伊曼结构，计算机执行指令的过程..."
tags: [学习笔记, coursera, 计算机组成, 2020]
feature: https://www.gla.ac.uk/media/Media_299663_smxx.jpg
comments: true
---

[参考课程 - 计算机组成](https://www.coursera.org/learn/jisuanji-zucheng/home/week/2)

* 目录
{:toc}

## 冯·诺依曼结构的要点

🍊 Key points of von Neumann structure

![](/static/2020-06-11-00-15-45.png)

> 关于EDVAC的报告草案，**主要论述2个重要思想**
>
> 1. 控制计算机的**程序应存放在存储器中**(而不是开关连线实现,降低运行效率)
> 2. 计算机**应采用二进制**(十进制会导致内部结构复杂)

🍉 要点归纳

![](/static/2020-06-12-00-16-54.png)

🍬 这份报告还明确了计算机内部结构由**五个部分组成**

* 运算器(中央算术运算) - CA: central arithmetical
* 控制器(中央控制) - CC: central control
* 存储器 - M: memory
* 输入设备 - I: input
* 输出设备 - O: output

🍬 数据&程序 - <font color="blue">二进制代码形式，不加区别存放在存储器中</font>，存放位置由存储器的地址指定

🍬 计算机工作时，<font color="blue">自动从存储器中取出指令加以执行</font>

---

🍊 了解这五个组成部分的例子 - 世界上第一个商业微处理器【intel 4004】

![](/static/2020-06-11-00-29-21.png)

> 它的面积很小，采用10μm制造工艺
>
> 内部晶体管2250个，max主频740KHz，字长4bit

* 对比现代，各项指标都非常落后.
  * 现代微处理器可达10nm量级，内部晶体管数量可达数十亿
  * 主频提高几千倍，字长通常32/64 bit

🍬 intel 4004 最初应用不在制造计算机

![](/static/2020-06-11-13-05-03.png)

🍙 <font color="blue">4001/2/3/4共同构成MCS-4</font>

🍬 MCS-4芯片组 · 计算器实现
* 4001 - 只读存储器ROM
  * 断电不易失
* 4002 - 随机存储器RAM
  * 快速读写，断电易失
* 4003 - 移位寄存器芯片
  * 负责I/O

---

🍬 MCS-4芯片组 · 另一种计算器实现

![](/static/2020-06-11-15-12-44.png)

> 该结构非计算机实现，但与冯诺依曼结构有对应关系

* 4004 - 微处理器/CPU
  * 运算器 & 控制器
* 4002 - 随机存储器RAM
* 两片4003芯片 - 输入输出设备
  * 4003接键盘 - INPUT
  * 4003接打印机 - OUTPUT

### 冯诺依曼结构核心

🍊 the Core of Von Neumman Structures

![](/static/2020-06-11-23-16-41.png)
![](/static/2020-06-12-00-04-32.png)

* 运算器CA & 控制器 CC - a.k.a **C**
  * 对应现代计算机**CPU**
* 存储器M
  * 主存储器(主存，内存)

🍬 <font color="purple">CPU & 主存储器通过系统总线(<b>控制，地址，数据总线</b>)连接</font>

### 主存的组织形式

![](/static/2020-06-12-00-10-25.png)

* 地址: 每个存储单元对应的序号
* 内容: 存储单元中存放的信息(指令&数据)
  * 现代计算机，一般一个存储单元存放8bit

🍬 指令(程序)&数据不加区分存放，提高效率

### 计算过程

![](/static/2020-06-12-00-16-54.png)

> 程序&数据通过I设备进入存储器
>
> 控制器发地址给主存储器(通过控制逻辑)，**获取指令&数据**
>
> 控制器发命令给运算器，进行运算(转换控制信号)，**返回结果/状态，可存放进存储器**
>
> 输出设备O将结果过输出到外部存储介质

#### 执行指令主要步骤

🍊 计算机执行一条**指令主要步骤**

![](/static/2020-06-12-00-23-24.png)

* 取指 - Fetch
  * _控制器_将请求的指令地址送往_存储器_
    1. 控制电路,发出控制信号, PC-内部总线->MAR, MAR-地址总线，传递地址
    2. 同时, 控制电路, 发出控制信号, 确定**读操作**
    3. 存储器MAR-地址总线，接收地址
    4. 存储器控制逻辑-控制总线，接收控制总线数据，确定**读操作**
    5. 存储器, <font color="red">地址译码MAR内容, 选中对应存储单元</font>
    6. 将存储单元内容，传至存储器MDR & 控制逻辑-控制总线，反馈CPU完成操作
    7. CPU-MDR-数据总线，接收数据
    8. MDR指令存储IR & 更新PC地址
  * _存储器_按给定地址读出指令，送回_控制器_
* 译码 - Decode
  * 控制器分析指令的操作性质
  * 控制器向有关部件发出指令所需控制信号
* 执行 - Execute
* 回写 - Write-back

---

🍊 执行指令的示例 RRR

![](/static/2020-06-14-18-52-39.png)

### 模型机: 计算机结构简化模型

🍊 模型机包含 CPU(控制器&运算器) & 存储器

![](/static/2020-06-12-15-37-20.png)

> 中间通过**系统总线**连接
>
> * 控制总线 - 控制逻辑
> * 地址总线 - MAR
> * 数据总线 - MDR

#### 模型机存储器

> 设计初期，确定存储器的编址方式(决定存储单元大小,位宽)

![](/static/2020-06-13-21-57-14.png)

* 如果**按字节编址**，则**每个存储单元位宽(存放)8bit**
* **地址总线 - MAR存储器地址寄存器**
  * <font color="blue">CPU访问存储单元</font>通过<font color="purple">地址总线</font>，给出**存储单元地址**,存储在**MAR**中
  * 地址总线宽度(位宽)为`n`, 则CPU能选中<font color="red">最多</font>`2^n`个存储单元
* **数据总线 - MDR存储器数据寄存器**
  * <font color="blue">CPU读写数据</font>通过<font color="purple">数据总线</font>，存储在**MDR**中
  * <font color="red"><b>数据总线宽度</b>一般为存储单元位宽的整数倍</font>
* **控制总线 - 控制逻辑**
  * 接收来自CPU的读写信号
  * 向CPU反馈传输完成的信号

#### 模型机CPU: 控制器

![](/static/2020-06-13-22-08-57.png)

> 用于控制计算机各部件，完成
>
> * **取指**
> * **分析(译码)**
> * **执行**
>
> 等功能

---

🍊 控制器的组成

![](/static/2020-06-13-22-08-57.png)

* IR - 指令寄存器
  * 存放<font color="blue">正在执行/即将执行的指令</font>(从存储器中读取)
* PC - 程序计数器
  * 存放<font color="blue">下条指令的存储单元地址</font>
  * <font color="purple">具有自动增量计数功能</font>,**取完下条指令后，PC需要自动递增以指向后来指令地址**
* MAR - 存储器地址寄存器
  * 访存时，存放存储单元地址
* MDR - 存储器数据寄存器
  * 访存时，存放读写数据
* **指令译码 & 控制电路**
  * 指令译码 - <font color="blue">对IR中指令进行译码，以确定存放的是哪条指令</font>
  * 控制电路 - <font color="red">确定指令后</font>，产生对应<font color="blue"><b>控制信号</b>，持续脉冲同步下控制CPU各个控制部件</font>

#### 模型机CPU: 运算器

![](/static/2020-06-13-22-45-30.png)

> 用于**算术** & **逻辑**运算

---

🍊 运算器基本组成

![](/static/2020-06-14-00-46-52.png)

* **ALU - 算术逻辑单元**
  * input `x`,`y` (数据暂存,register file通用寄存器)
  * output `z` (数据暂存，register file通用寄存器)
  * carry `f` - <font color="blue">运算结果状态(0/正负/进位/溢出)</font>

🍬 通用寄存器 register file

* 用于临时存放**存储器** or **ALU** or **其他通用寄存器**的数据
* R0~Rn-1

🍬 通用寄存器之间 或与 ALU，<font color="purple">传递数据要经过CPU<b>内部总线</b></font>

![](/static/2020-06-14-18-18-36.png)