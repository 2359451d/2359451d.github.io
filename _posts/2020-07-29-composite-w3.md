---
layout: post
title: "Cousera笔记 - 计算机组成3 · 算术逻辑单元"
date: 2020-07-29
excerpt: "算术逻辑单元"
tags: [学习笔记, coursera, 计算机组成, 2020]
feature: https://www.gla.ac.uk/media/Media_299663_smxx.jpg
comments: true
---

[参考课程 - 计算机组成](https://www.coursera.org/learn/jisuanji-zucheng/home/week/4)

* 目录
{:toc}

## 算术 & 逻辑运算

### 算术运算指令

**R型**指令

![](/static/2020-07-29-10-33-42.png)

* `add rd,rs,rt` #溢出时抛出异常
* `addu rd,rs,rt` #溢出不会抛出异常
* `sub rd,rs,rt` #溢出时抛出异常
* `subu rd,rs,rt` #溢出不会抛出异常

**I型**指令

* `addi rt,rs,imm`
  * 立即数存放在指令编码中
  * 如果立即数不及`32bit`，进行符号扩展-><font color="red">低16位的最高位复制16次填充至高16位</font>【不会改变符号数的值】
  * 溢出时抛出异常
* `addiu rt,rs,imm`
  * 区别在于，溢出时，不会抛出异常

#### 加法指令示例

![](/static/2020-07-29-10-12-02.png)

![](/static/2020-07-29-10-21-12.png)

### 逻辑运算指令

R型

![](/static/2020-07-29-10-38-52.png)

I型

![](/static/2020-07-29-10-39-02.png)

* 采用`0`扩展，因为不用考虑数字的正负

#### 逻辑与示例

![](/static/2020-07-29-10-40-32.png)

### 算术逻辑运算要求

![](/static/2020-07-29-10-41-36.png)

## 门电路基本原理

![](/static/2020-07-29-11-04-17.png)

### 晶体管

![](/static/2020-07-29-10-43-55.png)

* MOS管即绝缘栅场效应管，又称MOSFET

### 非门

![](/static/2020-07-29-10-47-21.png)
![](/static/2020-07-29-10-48-52.png)

### 与门

![](/static/2020-07-29-10-50-32.png)

与非门示例

![](/static/2020-07-29-10-59-24.png)

### 或门

![](/static/2020-07-29-11-00-37.png)

### 异或门

![](/static/2020-07-29-11-02-03.png)

## 寄存器基本原理

![](/static/2020-07-29-11-06-31.png)

* 寄存器可以用D触发器dff实现

### D触发器Dff

![](/static/2020-07-29-11-08-14.png)
![](/static/2020-07-29-11-10-40.png)

* 计算机系统中，由很多不同的dff组成，因此，不同dff中可以存储不同值
* 如未到时钟上升沿，不管输入如何变化，都不会影响输出
* 每个dff存储`1bit`

![](/static/2020-07-29-11-15-19.png)
![](/static/2020-07-29-11-16-44.png)

## ALU逻辑运算的实现

### 与运算的实现

![](/static/2020-07-29-11-18-18.png)
![](/static/2020-07-29-11-35-24.png)

* 32个与门

### 或运算的实现

![](/static/2020-07-29-11-36-48.png)

* 32个或门

### 多选器MUX：混合运算

MUX选择最终输出

![](/static/2020-07-29-11-38-30.png)

## 加法实现

### 半加器half adder

![](/static/2020-07-29-12-22-47.png)

* 计算1bit

### 全加器full adder

![](/static/2020-07-29-12-24-04.png)

* 两个半加器构成，计算2bit带进位的加法

#### 4-bit加法器

![](/static/2020-07-29-12-26-35.png)

32bit加法器同理，由32个全加器构成

* 多个全加器相连也成为**行波进位加法器**

![](/static/2020-07-29-12-27-20.png)

### 检查加法运算结果是否溢出

![](/static/2020-07-29-12-36-10.png)

#### 溢出检查方法

![](/static/2020-07-29-12-42-40.png)

#### MIPS对溢出的处理

分符号数（溢出抛异常）&无符号数（溢出不处理异常）处理

![](/static/2020-07-29-12-54-28.png)

#### x86对溢出的处理

`OF`溢出标志位

![](/static/2020-07-29-12-55-32.png)

* 如对溢出进行处理，后续对`OF`进行检查，并进行操作

## 减法实现

看为加法运算，需要补码则按位取反后`+1`

![](/static/2020-07-29-12-58-01.png)

![](/static/2020-07-29-13-00-10.png)

## 加法器的优化

普通全加器，效率有很大问题，之间必须互相等待输入输出

![](/static/2020-07-29-13-11-57.png)

### 行波进位加法器RCA

![](/static/2020-07-29-13-15-01.png)

![](/static/2020-07-29-13-18-57.png)

* 存在线延迟，**门延迟（主要关注）**

性能？

![](/static/2020-07-29-13-26-23.png)

改进 - 超前进位加法器CLA

![](/static/2020-07-29-13-49-13.png)
![](/static/2020-07-29-13-50-33.png)
![](/static/2020-07-29-13-51-47.png)
